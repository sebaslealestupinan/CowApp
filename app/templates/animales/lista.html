{% extends "base.html" %}

{% block title %}Lista de Animales - Cow App{% endblock %}

{% block content %}
<h1 class="title">Mis Animales</h1>

<div class="buttons">
    <a href="/animales/nuevo?user_id={{ user.id }}" class="button is-primary">Registrar Nuevo Animal</a>
    <a href="/ganadero/{{ user.id }}" class="button is-light">Volver al Dashboard</a>
</div>

<div class="table-container">
    <table class="table is-fullwidth is-striped is-hoverable">
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Tag ID</th>
                <th>Nombre</th>
                <th>Especie</th>
                <th>Raza</th>
                <th>Sexo</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% if animales %}
            {% for animal in animales %}
            <tr>
                <td><img src="{{ animal.imagen or 'https://placehold.co/600x400?text=Animal' }}" class="image is-64x64">
                </td>
                <td>{{ animal.tag_id }}</td>
                <td>{{ animal.nombre }}</td>
                <td>{{ animal.especie }}</td>
                <td>{{ animal.raza or '-' }}</td>
                <td>{{ animal.sexo }}</td>
                <td>
                    {% if animal.activo %}
                    <span class="tag is-success">Activo</span>
                    {% else %}
                    <span class="tag is-danger">Inactivo</span>
                    {% endif %}
                </td>
                <td>
                    <a href="/views/animal?animal_id={{ animal.id }}" class="button is-small is-info">Ver Detalle</a>
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="7" class="has-text-centered">
                    <p class="has-text-grey">No hay animales registrados</p>
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<div class="box mt-4">
    <p><strong>Total de animales:</strong> {{ animales|length }}</p>
</div>

{% endblock %}